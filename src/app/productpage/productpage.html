<section class="product">
    <div class="row">
        <div class="col-8 d-flex px-4 section-color">
            <div class="thumbnail-gallery">
                <div *ngFor="let thumb of thumbnails; let i = index" class="thumbnail"
                    [class.active]="i === selectedThumbnail" (click)="selectImage(i)">
                    <img [src]="thumb" alt="Thumbnail of the watch">
                </div>
            </div>

            <div class="main-image">
                <img [src]="mainImage" alt="Main image">
            </div>
        </div>

        <div class="col-4 d-flex align-items-center">
            <div class="product-info">
                <div class="new-badge">NEW</div>
                <h1 class="product-title">{{ product?.name }}</h1>
                <div class="product-specs">{{ product?.description }}</div>

                <div class="feature-section">
                    <div class="feature-header" (mouseleave)="hovered = false">
                        <div class="play-button" (mouseenter)="hovered = true" (click)="toggleAudio(audioPlayer)"
                            [ngClass]="{
                            'speaker': !hovered && !isAudioPlaying,
                            'play': hovered && !isAudioPlaying,
                            'pause': isAudioPlaying
                        }">
                        </div>

                        <audio #audioPlayer loop>
                            <source src="/image/ttsMP3.com_VoiceText_2025-7-31_19-0-54.mp3" type="audio/mpeg" />
                            Your browser does not support the audio element.
                        </audio>

                        <div>
                            <div class="feature-title">Jack Heuer’s vision,<br> reimagined</div>
                            <div class="feature-subtitle" *ngIf="!isAudioPlaying">Listen</div>

                            <div *ngIf="isAudioPlaying" class="audio-range-wrapper d-flex align-items-center">
                                <span class="audio-time">{{ formatTime(audioCurrentTime) }}</span>
                                <input class="ekoo-slidecontainer-range flex-grow-1 mx-2" type="range" min="0"
                                    [max]="audioDuration" [value]="audioCurrentTime"
                                    (input)="onSeek($event, audioPlayer)" (change)="onSeek($event, audioPlayer)"
                                    [style.background]="getRangeBackground()">
                                <span class="audio-time">{{ formatTime(audioDuration) }}</span>
                            </div>
                        </div>
                    </div>

                    <p class="feature-description">
                        Embrace the rebirth of a legend with the TAG Heuer Carrera Chronograph in 39mm. Paying tribute
                        to the...
                        <a href="#" class="expand-link">+</a>
                    </p>
                </div>

                <div class="price-heart-wrapper">
                    <div class="price">{{ product?.price | currency }}</div>
                    <i class="fa-heart heart-icon " [class.far]="!isFavorite" [class.fas]="isFavorite"
                        [class.filled]="isFavorite" (click)="toggleFavorite(); $event.stopPropagation()"></i>

                </div>

                <button class="shop-button" (click)="addToCart()">SHOP IN STORE</button>
                <button class="shop-button mt-2" (click)="goToOrderByPhone()">ORDER BY PHONE</button>

                <!-- REVEAL SECTION -->
                <div class="reveal-options" *ngIf="showMoreOptions">
                    <button class="btn availability-btn" (click)="toggleAvailability()"
                        aria-label="Check in-store availability">
                        <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"
                            fill="#000">
                            <path
                                d="M816-504v287.64q0 29.85-21.15 51.1Q773.7-144 744-144H216q-29.7 0-50.85-21.5Q144-187 144-216v-289q-33-23-41.5-59t.5-76l46-128q5-24 23-36t43.67-12h528.66q25.67 0 43.17 11t23.5 37l46 128q9 40 0 76t-41 60Zm-248-48q21 0 35.5-14t12.5-34l-24-144h-72v143.62Q520-580 534-566q14 14 34 14Zm-176.5 0q20.5 0 34.5-14t14-34.38V-744h-72l-24 144q-2 20 12.5 34t35 14ZM216-552q18 0 31.5-11t15.5-28l25-153h-72l-45 128q-8 23 6 43.5t39 20.5Zm528 0q25 0 39.5-20.5T790-616l-46-128h-72l25 153q2 17 16 28t31 11ZM216-216h528v-264q-25 0-47.5-9.5T656-519q-18 20-40.36 29.5T568-480q-25.18 0-47.09-10Q499-500 480-519q-17 19-40 29t-48 10q-25 0-47-8.5T304-519q-22.02 21.55-43.51 30.28Q239-480 216-480v264Zm528 0H216h.5-.71 528.28H743h1Z" />
                        </svg>
                        <span class="btn-text">In-store Availability</span>
                        <span class="icon fonticon-arrow-down" aria-hidden="true">›</span>
                    </button>

                    <div class="color-options">
                        <p class="non-input-label">Color and material options</p>
                        <div class="color-grid">
                            <div *ngFor="let option of colorOptions; let i = index" class="rec-tile"
                                [class.selected]="i === selectedColorOption" (click)="selectColorOption(i)">
                                <img [src]="option.image" [alt]="option.name">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END REVEAL -->
            </div>
        </div>

    </div>
</section>
<app-technicalspecifications [technicalSpecifications]="technicalSpecifications"></app-technicalspecifications>
<app-searchproduct></app-searchproduct>
